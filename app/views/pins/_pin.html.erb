<div id="<%= dom_id pin %>">
  <p>
    <strong>Image:</strong>
    <%= link_to image_tag(pin.resize_img(pin.image, 508, 760)), pin.image if pin.image.attached? %>
  </p>

  <p>
    <strong>Title:</strong>
    <%= pin.title %>
  </p>

  <p>
    <strong>Description:</strong>
    <%= pin.description %>
  </p>

  <p>
    <strong>Link:</strong>
    <%= pin.link %>
  </p>
   
  <p>
    <%= render partial: "pins/note", locals: {pin: pin, note: note} %>
    <%= turbo_frame_tag "note" %>
  </p>

  <p>
    <div class="comments-section">
      <%= turbo_frame_tag("#{dom_id(pin)}_comments") do %>
        <div id="add-comment"><%= render partial: "comments/form", locals: {pin: pin, comment: pin.comments.build} %></div>
        <div>Comments</div>
        <%= turbo_frame_tag("#{dom_id(pin)}_show_all_comments") do %>
          <% if pin.comments.count == 0 %>
            <div id="comment-empty">No comments yet! Add one to start the conversation.</div>
          <% end %>
          <% pin.comments.is_root.order(created_at: :desc).each do |comment| %>
            <%= render partial: "shared/comment_short", locals: {pin: pin, comment: comment} %>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </p>
</div>
